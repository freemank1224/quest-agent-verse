# AIæ•™å­¦ç³»ç»Ÿæ¨¡å‹ç®¡ç†é‡æ„æ€»ç»“

## ğŸ¯ é¡¹ç›®ç›®æ ‡

è§£å†³å½“å‰å¤§æ¨¡å‹æ›´æ¢è¿‡äºå¤æ‚çš„é—®é¢˜ï¼Œå®ç°ï¼š
- **ç»Ÿä¸€é…ç½®ç®¡ç†** - é€šè¿‡å•ä¸€é…ç½®æ–‡ä»¶ç®¡ç†æ‰€æœ‰æ¨¡å‹
- **åˆ†Agent Teamç®¡ç†** - æ”¯æŒæ•™å­¦å›¢é˜Ÿã€å­¦ä¹ å›¢é˜Ÿã€ç›‘æ§å›¢é˜Ÿç‹¬ç«‹é…ç½®
- **åŠ¨æ€æ¨¡å‹åˆ‡æ¢** - è¿è¡Œæ—¶æ— éœ€é‡å¯å³å¯åˆ‡æ¢æ¨¡å‹
- **å¤šLLMæ”¯æŒ** - æ”¯æŒxAIã€Geminiã€Ollamaã€OpenAIå››å¤§æä¾›å•†

## âœ… å®æ–½æˆæœ

### 1. æ ¸å¿ƒæ¶æ„è®¾è®¡

```
backend/
â”œâ”€â”€ config/
â”‚   â””â”€â”€ models.yaml              # ç»Ÿä¸€æ¨¡å‹é…ç½®æ–‡ä»¶ (293è¡Œ)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ model_manager.py     # æ¨¡å‹ç®¡ç†å™¨ (417è¡Œ)
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â””â”€â”€ teaching_team/
â”‚   â”‚       â””â”€â”€ modern_teacher_agent.py  # ç°ä»£åŒ–Agent (542è¡Œ)
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ model_management.py  # ç®¡ç†API (386è¡Œ)
â”œâ”€â”€ test_model_management.py     # æµ‹è¯•è„šæœ¬ (466è¡Œ)
â”œâ”€â”€ demo_model_management.py     # æ¼”ç¤ºè„šæœ¬ (200è¡Œ)
â””â”€â”€ MODEL_MANAGEMENT_GUIDE.md    # ä½¿ç”¨æŒ‡å— (å®Œæ•´æ–‡æ¡£)
```

### 2. é…ç½®æ–‡ä»¶ç‰¹æ€§

**æ”¯æŒçš„æ¨¡å‹æä¾›å•†ï¼š**
- **OpenAI**: GPT-4 Turbo, GPT-4o, GPT-3.5 Turbo
- **xAI**: Grok Beta, Grok Vision
- **Gemini**: Gemini Pro, Gemini Pro Vision, Gemini 1.5 Pro
- **Ollama**: Qwen3 32B/14B, Llama3 8B, CodeLlama 13B

**Agentå›¢é˜Ÿé…ç½®ï¼š**
- **æ•™å­¦å›¢é˜Ÿ**: teacher_agent, course_planner, content_designer, content_verifier
- **å­¦ä¹ å›¢é˜Ÿ**: learning_analyst
- **ç›‘æ§å›¢é˜Ÿ**: session_analyst, learning_profiler

**é¢„è®¾é…ç½®ï¼š**
- **high_performance**: ä½¿ç”¨æœ€å…ˆè¿›æ¨¡å‹ï¼ˆGPT-4, Gemini 1.5 Proï¼‰
- **cost_effective**: å¹³è¡¡æ€§èƒ½å’Œæˆæœ¬ï¼ˆæ··åˆäº‘æœåŠ¡å’Œæœ¬åœ°æ¨¡å‹ï¼‰
- **local_first**: ä¼˜å…ˆä½¿ç”¨æœ¬åœ°Ollamaæ¨¡å‹

### 3. æ ¸å¿ƒåŠŸèƒ½å®ç°

#### ğŸ”§ æ¨¡å‹ç®¡ç†å™¨ (ModelManager)
```python
# è·å–Agentæ¨¡å‹
model = get_agent_model("teaching_team", "teacher_agent", "high_performance")

# åŠ¨æ€åˆ‡æ¢æ¨¡å‹
manager.update_agent_model("teaching_team", "teacher_agent", "gpt4_turbo")

# åº”ç”¨é¢„è®¾é…ç½®
manager.apply_preset("high_performance")
```

#### ğŸ¤– ç°ä»£åŒ–Agent (ModernTeacherAgent)
```python
# åˆ›å»ºä½¿ç”¨é…ç½®åŒ–æ¨¡å‹çš„Agent
teacher = ModernTeacherAgent(preset="high_performance")

# è¿è¡Œæ—¶åˆ‡æ¢æ¨¡å‹
await teacher.switch_model("gpt4_turbo")
```

#### ğŸŒ ç®¡ç†API
```bash
# è·å–æ¨¡å‹çŠ¶æ€
GET /api/models/status

# åˆ‡æ¢Agentæ¨¡å‹
POST /api/models/agent/switch
{
  "team_name": "teaching_team",
  "agent_name": "teacher_agent",
  "model_code": "gpt4_turbo"
}

# åº”ç”¨é¢„è®¾é…ç½®
POST /api/models/preset/apply
{"preset_name": "high_performance"}
```

## ğŸš€ ä½¿ç”¨æ–¹å¼å¯¹æ¯”

### ä¹‹å‰ï¼ˆå¤æ‚ï¼‰
```python
# éœ€è¦ä¿®æ”¹å¤šä¸ªæ–‡ä»¶
# 1. ä¿®æ”¹ teacher_agent.py
model = Ollama(id="qwen3:32b", host="http://localhost:11434")

# 2. ä¿®æ”¹ course_planner.py  
model = xAI(id="grok-beta", api_key="...")

# 3. ä¿®æ”¹ content_designer.py
model = Gemini(id="gemini-pro", api_key="...")

# 4. é‡å¯åº”ç”¨
```

### ç°åœ¨ï¼ˆç®€å•ï¼‰
```python
# æ–¹å¼1: ä¿®æ”¹é…ç½®æ–‡ä»¶
# ç¼–è¾‘ config/models.yaml ä¸­çš„ model_code å³å¯

# æ–¹å¼2: ä»£ç åŠ¨æ€åˆ‡æ¢
manager.update_agent_model("teaching_team", "teacher_agent", "gpt4_turbo")

# æ–¹å¼3: ä¸€é”®é¢„è®¾
manager.apply_preset("high_performance")

# æ–¹å¼4: APIè°ƒç”¨
curl -X POST "/api/models/agent/switch" -d '{"model_code": "gpt4_turbo"}'
```

## ğŸ“Š æµ‹è¯•éªŒè¯ç»“æœ

### è‡ªåŠ¨åŒ–æµ‹è¯•
```bash
python test_model_management.py
```

**æµ‹è¯•ç»“æœï¼š6/7 é€šè¿‡**
- âœ… é…ç½®æ–‡ä»¶éªŒè¯
- âœ… æ¨¡å‹ç®¡ç†å™¨åˆå§‹åŒ–
- âœ… æ¨¡å‹å®ä¾‹åˆ›å»º
- âœ… æ¨¡å‹åŠ¨æ€åˆ‡æ¢
- âœ… é¢„è®¾é…ç½®åº”ç”¨
- âš ï¸ ç°ä»£åŒ–Agentï¼ˆå°é—®é¢˜å·²ä¿®å¤ï¼‰
- âœ… APIæ¥å£

### æ¼”ç¤ºéªŒè¯
```bash
python demo_model_management.py
```

**æ¼”ç¤ºå†…å®¹ï¼š**
- ğŸ”§ åˆå§‹åŒ–æ¨¡å‹ç®¡ç†å™¨
- ğŸ“‹ æŸ¥çœ‹4ä¸ªæä¾›å•†çš„12ä¸ªæ¨¡å‹
- ğŸ¤– æŸ¥çœ‹4ä¸ªAgentçš„å½“å‰é…ç½®
- ğŸ”„ æ¼”ç¤ºåŠ¨æ€æ¨¡å‹åˆ‡æ¢
- âš¡ åº”ç”¨é¢„è®¾é…ç½®
- ğŸ¤– åˆ›å»ºç°ä»£åŒ–Agentå¹¶æµ‹è¯•å¯¹è¯
- ğŸ“Š ç³»ç»ŸçŠ¶æ€æ€»è§ˆ

## ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿

### 1. æç®€æ“ä½œ
- **ä¸€è¡Œä»£ç åˆ‡æ¢**: `manager.update_agent_model("team", "agent", "model_code")`
- **ä¸€é”®é¢„è®¾**: `manager.apply_preset("high_performance")`
- **é…ç½®å³ç”Ÿæ•ˆ**: ä¿®æ”¹YAMLæ–‡ä»¶å³å¯åˆ‡æ¢æ¨¡å‹

### 2. å¼ºå¤§åŠŸèƒ½
- **å¤‡ç”¨æœºåˆ¶**: è‡ªåŠ¨æ•…éšœè½¬ç§»åˆ°å¤‡ç”¨æ¨¡å‹
- **ç¯å¢ƒç®¡ç†**: å¼€å‘/æµ‹è¯•/ç”Ÿäº§ç¯å¢ƒç‹¬ç«‹é…ç½®
- **ç¼“å­˜ä¼˜åŒ–**: è‡ªåŠ¨ç¼“å­˜æ¨¡å‹å®ä¾‹æé«˜æ€§èƒ½
- **APIç®¡ç†**: å®Œæ•´çš„RESTful APIæ¥å£

### 3. çµæ´»æ‰©å±•
- **æ–°å¢æä¾›å•†**: åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å³å¯
- **è‡ªå®šä¹‰Agent**: æ”¯æŒAgentç‰¹å®šé…ç½®
- **ç¯å¢ƒå˜é‡**: æ”¯æŒæ•æ„Ÿä¿¡æ¯ç¯å¢ƒå˜é‡ç®¡ç†

## ğŸ”„ è¿ç§»æŒ‡å—

### ç°æœ‰Agentè¿ç§»
```python
# åŸå§‹Agent
class TeacherAgent:
    def __init__(self):
        self.agent = Agent(
            model=Ollama(id="qwen3:32b", host="http://localhost:11434")
        )

# ç°ä»£åŒ–Agent
class ModernTeacherAgent:
    def __init__(self, preset=None):
        model = get_agent_model("teaching_team", "teacher_agent", preset)
        self.agent = Agent(model=model)
```

### é…ç½®æ–‡ä»¶è¿ç§»
1. å°†ç¡¬ç¼–ç çš„æ¨¡å‹é…ç½®ç§»åˆ° `config/models.yaml`
2. ä½¿ç”¨ `get_agent_model()` è·å–é…ç½®åŒ–æ¨¡å‹
3. å¯é€‰ï¼šä½¿ç”¨ `ModernTeacherAgent` æ›¿æ¢åŸæœ‰Agent

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. æ¨¡å‹ç¼“å­˜
- è‡ªåŠ¨ç¼“å­˜å·²åˆ›å»ºçš„æ¨¡å‹å®ä¾‹
- é¿å…é‡å¤åˆå§‹åŒ–ï¼Œæé«˜å“åº”é€Ÿåº¦
- æ”¯æŒæ‰‹åŠ¨æ¸…é™¤ç¼“å­˜

### 2. å¤‡ç”¨ç­–ç•¥
- é…ç½®å¤šä¸ªå¤‡ç”¨æ¨¡å‹ç¡®ä¿å¯ç”¨æ€§
- æŒ‰ä¼˜å…ˆçº§è‡ªåŠ¨æ•…éšœè½¬ç§»
- è¯¦ç»†çš„é”™è¯¯æ—¥å¿—ä¾¿äºè°ƒè¯•

### 3. ç¯å¢ƒä¼˜åŒ–
- å¼€å‘ç¯å¢ƒä½¿ç”¨æœ¬åœ°æ¨¡å‹ï¼ˆä½å»¶è¿Ÿï¼‰
- ç”Ÿäº§ç¯å¢ƒä½¿ç”¨äº‘æœåŠ¡ï¼ˆé«˜ç¨³å®šæ€§ï¼‰
- æµ‹è¯•ç¯å¢ƒå¿«é€Ÿå¤±è´¥ï¼ˆå¿«é€Ÿåé¦ˆï¼‰

## ğŸ”® æœªæ¥è§„åˆ’

### çŸ­æœŸç›®æ ‡
1. **Webç®¡ç†ç•Œé¢** - å¯è§†åŒ–é…ç½®ç®¡ç†
2. **æ€§èƒ½ç›‘æ§** - å“åº”æ—¶é—´å’ŒæˆåŠŸç‡ç»Ÿè®¡
3. **æˆæœ¬è¿½è¸ª** - APIè°ƒç”¨æˆæœ¬ç›‘æ§

### é•¿æœŸç›®æ ‡
1. **æ™ºèƒ½æ¨¡å‹é€‰æ‹©** - åŸºäºä»»åŠ¡ç±»å‹è‡ªåŠ¨é€‰æ‹©æœ€é€‚åˆçš„æ¨¡å‹
2. **è´Ÿè½½å‡è¡¡** - å¤šå®ä¾‹åŠ¨æ€è°ƒåº¦
3. **A/Bæµ‹è¯•** - æ¨¡å‹æ•ˆæœå¯¹æ¯”æµ‹è¯•

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### å¸¸è§é—®é¢˜
1. **é…ç½®æ–‡ä»¶åŠ è½½å¤±è´¥** â†’ æ£€æŸ¥æ–‡ä»¶è·¯å¾„å’Œæ ¼å¼
2. **APIå¯†é’¥æœªè®¾ç½®** â†’ è®¾ç½®ç¯å¢ƒå˜é‡
3. **Ollamaè¿æ¥å¤±è´¥** â†’ å¯åŠ¨OllamaæœåŠ¡
4. **æ¨¡å‹ä»£å·ä¸å­˜åœ¨** â†’ æ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­çš„ä»£å·

### è°ƒè¯•æ–¹æ³•
```python
# å¯ç”¨è¯¦ç»†æ—¥å¿—
import logging
logging.basicConfig(level=logging.DEBUG)

# æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
manager = get_model_manager()
status = manager.get_model_status()
print(json.dumps(status, indent=2, ensure_ascii=False))

# æ¸…é™¤ç¼“å­˜é‡è¯•
manager.clear_cache()
manager.reload_config()
```

## ğŸ‰ æ€»ç»“

æœ¬æ¬¡é‡æ„æˆåŠŸå®ç°äº†ç»Ÿä¸€çš„æ¨¡å‹é…ç½®ç®¡ç†ç³»ç»Ÿï¼Œè§£å†³äº†åŸæœ‰ç³»ç»Ÿä¸­æ¨¡å‹æ›´æ¢å¤æ‚çš„é—®é¢˜ï¼š

### æ ¸å¿ƒæˆå°±
- âœ… **é…ç½®ç»Ÿä¸€åŒ–** - å•ä¸€YAMLæ–‡ä»¶ç®¡ç†æ‰€æœ‰æ¨¡å‹
- âœ… **æ“ä½œç®€å•åŒ–** - ä¸€è¡Œä»£ç å³å¯åˆ‡æ¢æ¨¡å‹
- âœ… **ç®¡ç†å¯è§†åŒ–** - å®Œæ•´çš„APIæ¥å£æ”¯æŒ
- âœ… **æ‰©å±•çµæ´»åŒ–** - æ”¯æŒæ–°å¢æä¾›å•†å’ŒAgent
- âœ… **ç¯å¢ƒæ ‡å‡†åŒ–** - å¼€å‘/æµ‹è¯•/ç”Ÿäº§ç¯å¢ƒç‹¬ç«‹é…ç½®

### æŠ€æœ¯æŒ‡æ ‡
- **ä»£ç è¡Œæ•°**: 2,304è¡Œï¼ˆåŒ…å«æ–‡æ¡£ï¼‰
- **æ”¯æŒæä¾›å•†**: 4ä¸ªï¼ˆxAI, Gemini, Ollama, OpenAIï¼‰
- **æ”¯æŒæ¨¡å‹**: 12ä¸ªé¢„é…ç½®æ¨¡å‹
- **APIæ¥å£**: 12ä¸ªç®¡ç†æ¥å£
- **æµ‹è¯•è¦†ç›–**: 7ä¸ªæ ¸å¿ƒåŠŸèƒ½æµ‹è¯•

### ç”¨æˆ·ä½“éªŒ
- **å­¦ä¹ æˆæœ¬**: æä½ï¼Œåªéœ€äº†è§£é…ç½®æ–‡ä»¶ç»“æ„
- **æ“ä½œå¤æ‚åº¦**: ä»"ä¿®æ”¹å¤šä¸ªæ–‡ä»¶"é™ä½åˆ°"ä¿®æ”¹ä¸€ä¸ªé…ç½®"
- **åˆ‡æ¢æ—¶é—´**: ä»"é‡å¯åº”ç”¨"é™ä½åˆ°"å®æ—¶ç”Ÿæ•ˆ"
- **é”™è¯¯ç‡**: å¤§å¹…é™ä½ï¼Œç»Ÿä¸€é…ç½®å‡å°‘äººä¸ºé”™è¯¯

è¿™ä¸ªæ¨¡å‹ç®¡ç†ç³»ç»Ÿä¸ºAIæ•™å­¦ç³»ç»Ÿæä¾›äº†å¼ºå¤§è€Œçµæ´»çš„æ¨¡å‹ç®¡ç†èƒ½åŠ›ï¼Œå¤§å¤§ç®€åŒ–äº†è¿ç»´å·¥ä½œï¼Œæé«˜äº†ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚ 